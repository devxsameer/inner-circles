<section class="py-8">
    <div class="wrapper">

        <h1 class="section-heading mb-0">Update Post</h1>
        <p class="text-rose-600 mb-6">{{post.title}}</p>

        <div class="max-w-xs">

            {{!-- ================= ERRORS ================= --}}
            {{#if errors}}
            {{#if errors.length}}
            <ul class="mb-4 text-red-600">
                {{#each errors}}
                <li>{{this.msg}}</li>
                {{/each}}
            </ul>
            {{/if}}
            {{/if}}

            {{!-- ================= FORM ================= --}}
            <form method="POST"
                  action=""
                  class="flex flex-col gap-3">

                {{!-- Title --}}
                <label for="title">
                    <span class="block text-sm font-medium mb-1">Title</span>
                    <input type="text"
                           name="title"
                           id="title"
                           class="border p-2 w-full rounded"
                           value="{{post.title}}"
                           required />
                </label>

                {{!-- Circle (READ-ONLY) --}}
                <div>
                    <label class="block text-sm font-medium mb-1">
                        Circle
                    </label>
                    <div class="border p-2 rounded bg-gray-50 text-gray-600">
                        {{circle.name}}
                    </div>

                    {{!-- Hidden input to preserve circleId --}}
                    <input type="hidden"
                           name="circleId"
                           value="{{circle.id}}" />
                </div>

                {{!-- Visibility --}}
                <div>
                    <label class="block text-sm font-medium mb-1">
                        Visibility
                    </label>
                    <select name="visibility"
                            class="border p-2 w-full rounded">
                        <option value="public"
                                {{isSelected
                                post.visibility "public"
                                }}>
                            Public
                        </option>
                        <option value="members_only"
                                {{isSelected
                                post.visibility "members_only"
                                }}>
                            Members Only
                        </option>
                    </select>
                </div>

                {{!-- Body --}}
                <label for="body">
                    <span class="block text-sm font-medium mb-1">Body</span>
                    <textarea name="body"
                              id="body"
                              rows="6"
                              class="border p-2 w-full rounded"
                              required>{{post.body}}</textarea>
                </label>

                {{!-- Actions --}}
                <div class="flex gap-3 mt-2">
                    <button type="submit"
                            class="btn-lg">
                        Update Post
                    </button>

                    <a href="/posts/{{post.id}}"
                       class="btn-lg bg-neutral-100 text-neutral-950 hover:bg-neutral-200">
                        Cancel
                    </a>
                </div>

            </form>

        </div>
    </div>
</section>