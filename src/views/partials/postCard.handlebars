<div class="relative cursor-pointer {{#unless hideVisibility}} mb-8 {{/unless}}"
     onclick="window.location='/posts/{{id}}'">
    <div class="z-20 relative shadow-md p-4 bg-white border border-neutral-200 rounded-md hover:shadow-lg transition">

        <h3 class="font-semibold text-lg">{{title}}</h3>
        <p class="text-gray-700 text-sm mt-2 mb-3">{{truncate body 80}}</p>

        <div class="flex text-sm justify-between">
            <p class="text-gray-600 flex gap-1">
                <strong>Author:</strong> {{authorUsername}}
            </p>
            {{#unless hideCircle}}
            <p class="text-gray-600 flex gap-1">
                <strong>Circle:</strong><a class="underline"
                   onclick="e.stopPropagation()"
                   href="/circles/{{circleId}}">{{circleName}}</a>
            </p>
            {{/unless}}
        </div>


        {{!-- Owners and Admins can delete posts --}}
        {{#if (or (equals role "owner") (equals role "admin"))}}
        <div class="mt-3">
            <a href="/posts/{{id}}/delete"
               onclick="event.stopPropagation();"
               class="btn bg-rose-200 text-rose-700">
                Delete Post
            </a>
        </div>
        {{/if}}


    </div>
    {{#unless hideVisibility}}
    <div class="space-x-3 z-10 absolute right-4 top-full">
        {{#ifEqual visibility "public"}}
        <span class="btn rounded-t-none bg-gray-200 text-gray-700">
            {{visibility}}
        </span>
        {{else}}
        <span class="btn rounded-t-none bg-blue-100 text-blue-700">
            {{visibility}}
        </span>
        {{/ifEqual}}
    </div>
    {{/unless}}
</div>